{% extends "base.html" %}

{% block title %}{{ section.title }} - {{ config.title }}{% endblock title %}

{% block content %}
{% if section.extra.featured_image %}
    <img src="{{ get_url(path='travels/' ~ section.extra.featured_image) }}" alt="{{ section.extra.featured_image_alt | default(value='') }}" style="max-width:100%;max-height:300px;height:auto;margin-bottom:1em;object-fit:contain;">
{% endif %}
<h1>{{ section.title }}</h1>
{% if section.description %}
    <p>{{ section.description | markdown | safe }}</p>
{% endif %}
<div>
    {{ section.content | safe }}
</div>
<div class="listing-grid">
    {# List subsections (e.g., trips) #}
    {% for subsection in section.subsections %}
        {% set subsec = get_section(path=subsection) %}
        <div class="listing-card">
            <h3><a href="{{ subsec.permalink }}">{{ subsec.title }}</a></h3>
            {% if subsec.description %}
                <p>{{ subsec.description }}</p>
            {% endif %}
        </div>
    {% endfor %}
    {# List pages directly under this section #}
    {% for page in section.pages %}
        <div class="listing-card">
            <h3><a href="{{ page.permalink }}">{{ page.title }}</a></h3>
            {% if page.description %}
                <p>{{ page.description }}</p>
            {% endif %}
        </div>
    {% endfor %}
</div>
{% endblock content %}
